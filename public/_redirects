# SPA 终极重定向规则（零循环风险，静态资产 Worker 可用）
# 第一步：排除所有静态资源 + index.html 本身
!/index.html$          # 排除 index.html 自身（关键）
!/assets/*             # 排除静态资源目录
!/.*\.(js|css|png|jpg|jpeg|gif|svg|ico|json|woff2?|ttf|eot)$  # 合并所有文件后缀排除（更简洁）

# 第二步：仅匹配「非文件路径」转发到 index.html（核心优化）
# 匹配逻辑：路径没有后缀（不是文件）且不是根路径（/）、不是静态目录
# 用 :path 变量匹配，避免 /* 的全局模糊匹配
/:path*/ /index.html 200  # 匹配带斜杠的路径（如 /home/、/about/123/）
/:path /index.html 200    # 匹配不带斜杠的路径（如 /home、/about）