# 核心配置：匹配 CI 期望的 Worker 名称
# 注意：CI 系统期望的 Worker 名称是 "george-gilder"
name = "george-gilder"
# 必填：兼容性日期（与你之前的配置一致，无需修改）
compatibility_date = "2025-11-25"
main = "./src/index.ts"

# 环境变量（前端可通过 import.meta.env 访问，如后端 API 地址）
[vars]
NODE_ENV = "production"
VITE_API_URL = "https://apistock-1hgl.onrender.com"
VITE_Web_Trader_UUID = "26aba1ff-5bda-4fa8-aa86-a7f8917cd343"

[assets]
directory = "./dist/"
not_found_handling = "single-page-application"
binding = "ASSETS"
# 只有 API 请求先运行 Worker，其他请求直接由 Cloudflare 处理静态资源
run_worker_first = [ "/api/*" ]

# 注意：如果域名未在 Cloudflare 中配置为 zone，需要先配置域名
# 配置步骤：
# 1. 在 Cloudflare Dashboard 中添加域名
# 2. 更新 DNS 记录
# 3. 然后取消注释下面的 routes 配置

# [[routes]]
# # 匹配根域名 about-kim.vip 下所有路径
# pattern = "about-kim.vip/*"
# zone_name = "about-kim.vip"

# [[routes]]
# # 匹配 www.about-kim.vip 下所有路径
# pattern = "www.about-kim.vip/*"
# zone_name = "about-kim.vip"      